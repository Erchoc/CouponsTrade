# 优惠券交易平台二期需求

## 定义

- 平台：优惠券交易`平台`
- 邀请码：潜在`用户`在注册时需要的凭证
- 用户：已在平台注册的自然人
- 买家：在平台买`卖家`出售的优惠券，或在平台发布求购优惠券信息等待`卖家`出售的优惠券的`用户`
- 卖家：在平台发布出售优惠券信息等待`买家`购买 ，或在平台上出售`买家`需要的优惠券的`用户`
- 开启：查看优惠券的电子券码
- 仲裁：买卖双方存在争议订单，由买卖双方陈述原由，由仲裁参与者投票来判断对错
- 订单：`平台`根据优惠券生成的双方契约
- 优惠券：与电子券码相关的介绍信息

## `用户`功能
### 注册
- 一期已完成功能说明：
  - 注册功能，其中注册信息包括昵称、手机号、模拟验证码、密码、`邀请码`
- 二期需要完成的内容：
  - 在输入完成手机号后，添加向手机发送验证码的功能
  - 非`用户`在注册页面输入注册信息中的`验证码`由模拟值变为真实值
  - 非`用户`在注册页面输入注册信息中的`邀请码`，要有`邀请码`的超时验证，超时时间（待定）。
  - 注册成功后，邀请人与被邀请人成为好友关系

### 查看个人信息功能
- 一期已完成功能说明：
  - 查看个人信息功能，查看信息要素包括：昵称、手机号、`邀请码`
- 二期需求在`查看个人信息功能`中，需要在一期基础上添加另外一些查看个人信息的要素：
  - `用户`等级
  - `用户`评级
  - `用户`关系网

### 编辑`用户`信息功能
- 二期需要完成编辑功能

### 生成`邀请码`
- 功能描述：用来提供给被邀请的`用户`注册信息时用的信息。
- 一期已完成功能：
  - 生成`邀请码`的功能
- 二期需要完成需求
  - 在生成`邀请码`功能中，需要添加邀请`用户`个数上限的验证。
  - 当`用户`已邀请`用户`个数达到3个，不再生成`邀请码`并提示给`用户`：邀请`用户`个数已达上限

### 电子钱包充值功能
- 功能描述：为了方便优惠券交易平台清算、`用户`查看收支记录，因此需要开发电子钱包充值、提现功能
- 一期未开发该功能
- 二期需要完成的内容：电子钱包充值功能
  - 电子钱包充值功能的前置条件：
    - `用户`已登陆优惠交易平台
    - `用户`微信已关注公众号
    - `用户`电子钱包充值至少1元
  - 电子钱包充值功能的操作步骤如下：
    - `用户`进入个人电子钱包
    - `用户`点击`充值`
    - `用户`选择付款的方式
    - `用户`输入充值金额（提示`用户`充值金额大于等于1元）
    - `用户`点击确认充值

### 电子钱包提现功能
- 功能描述：`用户`售出优惠券后，交易的金额清算后会存入`用户`的电子钱包中，`用户`可通过提现功能把电子钱包中的钱转出到`用户`微信钱包
- 一期未开发该功能
- 二期需要完成的内容：电子钱包提现功能
  - 电子钱包提现功能的前置条件：
    - `用户`已登陆优惠交易平台
    - `用户`微信已关注公众号
    - `用户`电子钱包提现至少1元
  - 电子钱包提现功能的操作步骤如下：
    - `用户`进入个人电子钱包
    - `用户`点击`提现`
    - `用户`输入提现的金额（提示`用户`提现金额大于等于1元）
    - `用户`点击确认提现

## 发售功能

### 发布优惠券
- 功能描述：`用户`在优惠券交易平台发布优惠券信息，进行售卖
- 一期已完成功能：
  - 发布优惠券的功能中，录入的优惠券信息：优惠券名称、优惠券码、原价、售卖价、券面价、截止日期、自动退货、描述
- 二期需求需要完成内容
  - 发布优惠券中，在一期基础上，添加录入优惠券信息要素添加：
    - 适用区域信息（分级别（一级：全国；二级：省（市），如北京；三级：区（市），如：海淀区））
    - 券码形式：券码形式的选择与优惠券码是联动的。当券码形式为图片，则优惠券码为图片上传功能；当券码形式为文本，则优惠券码为输入文本的功能
    - 优惠券码：添加优惠券码的图片上传功能
    - 门店的信息（输入商户名称，通过地图采集门店坐标、位置、电话）
    - 商户图片（商户图片必须上传一张图片，且图片要求第一张是必须与优惠券相关，但不能是优惠券券码图片）
  - 实现发布优惠券的发布功能。

### 下架优惠券
- 一期已完成下架优惠券功能。

### 自动下架
- 功能描述：是指当平台的日期大于优惠券的截止日期时，平台下架优惠券，使优惠券不再售卖的功能
- 二期需要完成的功能:优惠券的自动下架功能
  - 当平台日期超过优惠券的截止日期时，平台将优惠券自动下架

### 编辑优惠券
- 功能描述：`用户`在优惠券交易平台编辑优惠券信息
- 一期已完成功能：
  - 发布优惠券的功能中，编辑优惠券信息包括：优惠券名称、优惠券码、原价、售卖价、券面价、截止日期、自动退货、描述
- 二期需求需要完成内容
  - 编辑优惠券中，在一期基础上，编辑惠券信息添加如下要素：
    - 适用区域信息分级别（一级：全国；二级：省（市），如北京；三级：区（市），如：海淀区）
    - 券码形式：券码形式的选择与优惠券码是联动的。当券码形式为图片，则优惠券码为图片上传功能；当券码形式为文本，则优惠券码为输入文本的功能
    - 优惠券码：添加优惠券码的图片上传功能
    - 门店的信息（输入商户名称，通过地图采集门店坐标、名称、地址、电话）
    - 优惠券相关图片（优惠券相关图片必须上传一张图片，最多上传6张，且图片要求第一张是必须与优惠券相关，但不能是优惠券券码图片）
  - 编辑优惠券中，在一期基础上，调整如下要素：
    - 优惠券券码由编辑改为不可编辑
  - 编辑优惠券中，实现编辑功能

### 发布的优惠券
- 功能描述：查看`用户`已发布的优惠券信息
- 一期已完成功能：
  - 查看已发布优惠券列表
    - 查看的要素信息包括：优惠券名称、售卖价、优惠券描述
  - 查看已发布优惠券详情
    - 查看的要素信息包括：`用户`昵称、优惠券名称、原价、售卖价、可自动退货、优惠券类别、优惠券状态、截止日期、优惠券描述
- 二期需要完成功能：
  - 查看已发布优惠券列表，查看的要素信息添加：券面价
  - 查看已发布优惠券详情，查看的要素信息添加：
    - 适用区域信息(分级别（一级：全国；二级：省（市），如北京；三级：区（市），如：海淀区）)
    - 券码形式：是指上传的优惠券的券码是文本形式还是图片形式，两个选项
    - 券面价、
    - 门店的信息（门店的名称、地址、电话）
    - 优惠券相关图片（优惠券相关图片必须上传一张图片，最多上传6张，且图片要求第一张是必须与优惠券相关，但不能是优惠券券码图片）

### 下架的优惠券
- 功能描述：查看`用户`已下架的优惠券信息
- 一期未实现该功能
- 二期需要完成功能，添加下架的优惠券功能
  - 查看已下架的优惠券列表
    - 查看的要素信息包括：优惠券名称、售卖价、券面价、优惠券描述
  - 查看已下架的优惠券详情
    - 查看的要素信息包括：`用户`昵称、优惠券名称、原价、售卖价、可自动退货、优惠券类别、优惠券状态、截止日期、优惠券描述

### 自动退货
- 功能描述：当买家申请退货同时三个满足以下条件时，`平台`将自动退货。
  - 自动退货条件：
    - 条件1：`卖家`在发布优惠券时，选择支持自动退货
    - 条件2：优惠券没有超过截止日期
    - 条件3：优惠券没有开启
- 二期需要完成的需求
  - 需要完成当买家申请退货，退货同时满足以上自动退货的三个条件，则`平台`将自动退货给买家。

### 处理退货
- 功能描述：`卖家`同意或者拒绝`买家`的退货
- 处理退货的条件：
  - `买家`申请退货
  - `卖家`收到`平台`发的申请退货信息
- 二期需要完成的需求
  - `卖家`处理退货的功能

### `卖家`退款
- 功能描述：实现`卖家`退钱给买家的功能。
- 原因：补偿买家确认收货后，买家不能申请退款的情况。
- 二期需要完成的需求
  - 当`平台`已将钱结算给`卖家`，`卖家`需要通过`卖家退款`功能，退钱给买家。
  - 操作
    - `卖家`进入`购买的优惠券`功能，查看已购买的优惠券列表，
    - 点击进入查看优惠券详情页面，点击`退款`
    - `卖家`输入要退款的金额（退款金额不能大于`订单`金额）
    - `卖家`选择支付方式：余额、微信、支付宝
    - `平台`将`卖家`退款的金额转入买家的电子钱包。

## 购买功能

### 查询优惠券列表
- 功能描述：`用户`通过输入优惠券名称、附近、优惠券分类、区域、排序查询优惠券，快速查找到目标优惠券
  - 注：详细信息中添加`用户`等级、评级、买卖双方的关系链，`用户`通过`用户`评级和关系链长短判断购买优惠券的风险
- 一期已完成功能
  - `用户`输入优惠券名称，模糊查询到优惠券的列表
  - 查询的要素信息包括：优惠券名称、售卖价、优惠券描述
- 二期需要完成功能
  - 添加新的查询条件：通过附近、优惠券分类、适用区域、排序查询优惠券
     - 附近：通过百度地图采集的门店的坐标信息，以`用户`坐标为中心，将半径在1Km内的门店定义为附近门店（待定）
     - 优惠券分类：包括西餐、海鲜、咖啡、面包糕点、火锅、烧烤、冰激凌、快餐、自助餐、其他
     - 适用区域：分级别（一级：全国；二级：省（市），如北京；三级：区（市），如：海淀区）
     - 排序：售卖价（由低到高）、距离（由近到远）
  - 添加`优惠券列表`展示要素信息
    - 适用区域（分级别（一级：全国；二级：省（市），如北京；三级：区（市），如：海淀区））
    - 退：是否自动退款
    - 限：使用日期和时间是否受限制，如：使用日期仅限于周三使用
    - 稀：比较抢手热门的优惠券,在`平台`的数量仅有几张

### 查看优惠券详情
- 功能描述：`用户`在查找到目标优惠券后，通过查看优惠券详情功能，查看要购买的优惠券的详细信息。
  - 注：详细信息中添加`用户`等级、评级、买卖双方的关系链，`用户`通过`用户`评级和关系链长短判断购买优惠券的风险
- 一期已完成功能：
  - 查看优惠券详情，查看的要素信息包括：
    - `用户`昵称、优惠券名称、原价、售卖价、可自动退货、优惠券类别、优惠券状态、截止日期、优惠券描述
- 二期需要完成功能：
  - 查看优惠券详情功能，添加要查看的要素信息：
    - 适用区域信息（分级别（一级：全国；二级：省（市），如北京；三级：区（市），如：海淀区））
    - 券码形式
    - 券面价、
    - 门店的信息（门店的名称、位置、电话），具体怎么展示（待定）
    - 优惠券相关图片、
    - `用户`等级、
    - `用户`评级、
    - 买卖双方关系链

### 生成`订单`
- 功能描述：`买家`购买优惠券后，`平台`就会生成优惠券`订单`
- 一期已完成需求


### 取消`订单`
- 功能描述：`买家`手动取消已生成的`订单`的功能

### 订单超时
- 功能描述：是指`用户`在规定时间内没有支付`订单`时，`平台`将`订单`设置为超时并取消`订单`的功能。
- 二期需求功能：
  - `订单`超时功能，`订单`生成半小时之内未完成支付的话，就会造成`订单`超时，而导致`订单`取消。

### 支付订单
- 功能描述：用户对已生成的`订单`进行支付的功能。
- 一期已完成功能
  - 通过微信和支付宝两种支付渠道进行模拟支付功能
  - 页面要素：`卖家`昵称、`卖家`手机号、支付渠道(微信、支付宝)、优惠券名称、优惠券售卖价、留言
- 二期需要完成功能
  - 添加功能
    - 选择支付方式添加余额支付方式
    - 模拟支付修改为真实支付，包括微信、余额

### 购买的优惠券
- 功能描述：`买家`查看购买的优惠券的功能
- 一期已完成功能
  - 查看购买的优惠券列表
  - 查看购买的优惠券详情
- 二期需要完成功能
  - 查看购买的优惠券列表中
     - 添加根据根据查询条件-`订单状态`查看优惠券列表
     - `订单状态`：待支付、`订单`取消、`订单`超时、已支付、已确认、已退货、已退款、申请退货、拒绝退货、`仲裁`开启、`仲裁`结束

### 卖出的优惠券
- 功能描述：`卖家`查看卖出的优惠券的功能
- 一期未实现该功能
- 二期需要完成的功能,添加卖出的优惠券的功能，包括
  - 查看卖出的优惠券列表
    - 页面要素包括：优惠券名称、售卖价、券面价、优惠券描述
  - 查看卖出的优惠券详情
    - 页面要素包括：`用户`昵称、优惠券名称、原价、售卖价、可自动退货、优惠券类别、优惠券状态、截止日期、优惠券描述

### 贩卖优惠券
- 功能描述：为了让优惠券在`平台`进行流动，在`买家`购买优惠券的券码未`开启`且未到`截止日期`的前提下，`买家`可以在平台继续卖购买的优惠券。
- 一期未实现该功能
- 二期需要完成功能
  - 具体如何实现贩卖（待定）

### 开启优惠券
- 功能描述：查看优惠券的券码的功能
- 一期已实现该功能
- 二期需要完成功能
  - 修改优惠券的加密规则（待定）

### 确认`订单`
- 功能描述：为了让`平台`知道`用户`已使用购买的优惠券，需要`用户`在`平台`上手动操作确认订单
- 一期已实现该功能

### 申请退货
- 功能描述：

### 申请`仲裁`
- 功能描述：当`卖家`拒绝`买家`的退货申请时，`买家`可以在`平台`申请`仲裁`

### 自动下单
- 功能描述：`买家`录入要购买的优惠券信息，`平台`匹配出优惠券信息并生成`订单`
- 二期需要完成功能：
  - 步骤
    - 点击自动下单功能
    - 录入自动下单的要素：优惠券名称、优惠券的售卖价最低价格、优惠券的售卖价最高价格
  - 注：优惠券自动下单是否加期限（待定）

## 社交功能

### 添加好友
- 功能描述：为了提高`用户`之间的粘性，用户可以添加其他`用户`为好友
- 二期需要完成功能
  - 添加好友的功能

### 查看好友
- 功能描述：为了方便`用户`查看好友的信息，`用户`可以查看好友的的信息，包括好友列表和好友的详细信息
- 二期需要完成功能
  - 查看好友功能

### 删除好友
- 功能描述：当好友之间关系不在友好时，`用户`可以解除好友关系，通过删除功能来实现。
  - 二期需要完成功能
    - 删除好友功能

### 即时通讯
- 功能描述：`用户`之间相互

### 仲裁室
- 功能描述：`卖家`与`买家`在仲裁过程中陈述事件的地方
- 步骤：
  - 当`用户`申请仲裁，仲裁的相关人员就会进入仲裁室
  - 买卖双方在聊天室陈述事件的原由
  - 其他的仲裁相关人员在仲裁室可以看到买卖双方的陈述内容，并且在此进行投票

### 仲裁
- 功能描述`用户`申请仲裁后，买卖双方在仲裁室陈述事件，仲裁参与者可以看到买卖双方的陈述内容，然后进行投票，在第一轮投票结束后如果无人投票或者平票，则拉入更多的仲裁参与人员继续下一轮投票，直到有结果为止。


## 其他功能

### `平台`清算
- 功能描述：`买家`支付`订单`后满足以下条件之一，`平台`就进行清算给用户
- 条件
    - `买家`已经确认`订单`
    - `买家`超过7天没有确认`订单`或申请退货
    - `买家`申请退货失败后超过3天没有申请仲裁
    - `买家`申请`仲裁`失败后

### 消息通知
- `平台`推送消息给`用户`

### 平台清算
- 功能描述：当`平台`运营良好时，考虑在交易完成后，`平台`会根据交易的金额抽取一定比例的费用

### 惩罚措施
卖家的`仲裁`次数超过一定数目后，`平台`将禁用一段时间`卖家`的发售功能

### `仲裁`补偿
`用户`在`仲裁`中失败了，`平台`将根据`用户`参与`仲裁`的次数给予相应补偿，以提高`平台`与`用户`之间的粘合度




